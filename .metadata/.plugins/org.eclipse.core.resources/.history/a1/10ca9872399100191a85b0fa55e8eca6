package menusconiconos;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.GraphicsEnvironment;

import javax.swing.ButtonGroup;
import javax.swing.JCheckBoxMenuItem;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JPanel;
import javax.swing.JRadioButtonMenuItem;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.text.StyledEditorKit;

public class Lamina extends JPanel
{
	private static final long serialVersionUID = 1L;
	
	private String[] misFuentes = GraphicsEnvironment.getLocalGraphicsEnvironment().getAvailableFontFamilyNames();
	
	private JMenuBar mibarra;
	
	private ButtonGroup tamano, colores, fuentes;
	
	private JTextPane texto;
	
	private JMenu[] opciones = {new JMenu("Font"), new JMenu("Style"), new JMenu("Size"), new JMenu("Colores de letra")};
	
	private JMenuItem[] fuente;
	
	private JMenuItem[] estilo = {new JCheckBoxMenuItem("Negritas"), new JCheckBoxMenuItem("Cursivas")};
	
	private JMenuItem[] size = {new JRadioButtonMenuItem("12"), new JRadioButtonMenuItem("14"),  new JRadioButtonMenuItem("16"),  new JRadioButtonMenuItem("18"),  new JRadioButtonMenuItem("24"),  new JRadioButtonMenuItem("36")};
	
	private JMenuItem[] background = {anadirColores("Amarillo", Color.yellow), anadirColores("Verde", Color.green), anadirColores("Rosado", Color.pink), anadirColores("Negro", Color.black)};
	
	public Lamina() 
	{
		setLayout(new BorderLayout());
		
		anadirFuentes();
		
		JMenuItem[][] items = {fuente, estilo, size, background}; 
		
		anadirElementos(items);
		
		anadirAcciones(items);
		
		anadirAlGrupo(items, 0, fuentes);
		anadirAlGrupo(items, 2, tamano);
		anadirAlGrupo(items, 3, colores);
		
		this.add(mibarra, BorderLayout.NORTH);
		
		this.add(texto, BorderLayout.CENTER);
		
	}
	
	public void anadirFuentes() 
	{
		fuente = new JMenuItem[misFuentes.length - 235];
		
		for(int i = 0; i < misFuentes.length - 235; i++) 
			fuente[i] = new JRadioButtonMenuItem(misFuentes[i]);
		
	}
	
	public void anadirElementos(JMenuItem[][] items)
	{
		
		texto = new JTextArea();
		
		texto.setLineWrap(true);
		
		mibarra = new JMenuBar();
		
		for(int i = 0; i < items.length; i++) 
		{
			mibarra.add(opciones[i]);
			
			anadirItems(opciones[i], items[i]);
		}
			
	}
	
	public void anadirItems(JMenu opcion, JMenuItem[] items) 
	{
		for(JMenuItem I: items)
			opcion.add(I);
	}
	
	public void anadirAcciones(JMenuItem[][] items) 
	{
		
		for(JMenuItem F: fuente)
			F.addActionListener(new StyledEditorKit.FontFamilyAction("", F.getText()));
		
		for(JMenuItem T: size)
			T.addActionListener(new StyledEditorKit.FontSizeAction("", Integer.parseInt(T.getText())));
		
		items[1][0].addActionListener(new StyledEditorKit.BoldAction());
		
		items[1][1].addActionListener(new StyledEditorKit.ItalicAction());
		
	}
	
	public void anadirAlGrupo(JMenuItem[][] items, int indice, ButtonGroup grupo) 
	{
		grupo = new ButtonGroup();
		
		for(JMenuItem M: items[indice])
			grupo.add(M);
	}
	
	public JRadioButtonMenuItem anadirColores(String titulo, Color color) 
	{
		JRadioButtonMenuItem etiqueta = new JRadioButtonMenuItem(titulo);
		
		etiqueta.addActionListener(new StyledEditorKit.ForegroundAction("", color));
		
		return etiqueta;
	}
	
}
