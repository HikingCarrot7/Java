package sockets.cliente;

import java.awt.BorderLayout;
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.io.DataOutputStream;
import java.io.IOException;
import java.net.Socket;

import javax.swing.JButton;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextArea;
import javax.swing.JTextField;

public class ClienteInterfaz extends JPanel
{
	private static final long serialVersionUID = 1L;
	
	private JLabel info;
	private JButton enviar;
	private JTextField texto;
	private JTextArea areaTexto;
	private JPanel soporteTexto, soporteEnvio;
	
	public ClienteInterfaz() 
	{
		iniciarElementos();
		anadirElementos();
	}
	
	private void iniciarElementos() 
	{
		setLayout(new BorderLayout());
		
		soporteTexto = new JPanel(new BorderLayout());
		soporteEnvio = new JPanel(new FlowLayout(FlowLayout.LEFT));
		
		info = new JLabel("Eres el Cliente!", JLabel.CENTER);
		enviar = new JButton("Enviar");
		texto = new JTextField(35);
		areaTexto = new JTextArea();
		
		accionBoton();
		
	}
	
	private void anadirElementos() 
	{
		soporteTexto.add(info, BorderLayout.NORTH);
		soporteTexto.add(areaTexto, BorderLayout.CENTER);
		
		soporteEnvio.add(texto);
		soporteEnvio.add(enviar);
		
		add(soporteTexto, BorderLayout.CENTER);
		add(soporteEnvio, BorderLayout.SOUTH);
	}
	
	private void accionBoton() 
	{
		enviar.addActionListener((ActionEvent e) ->
		{
			try 
			{
				Socket miSocket = new Socket("192.168.0.9", 9999);
				
				DataOutputStream flujo = new DataOutputStream(miSocket.getOutputStream());
				
				flujo.writeUTF(texto.getText());
				
				flujo.close();
				miSocket.close();
				
			} catch (IOException e1) 
			{
				System.out.println(e1.getMessage());
			}


		});
	}

}
